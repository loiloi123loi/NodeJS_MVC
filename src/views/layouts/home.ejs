<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NodeJs & ExpressJs MVC</title>
  <link rel="stylesheet" href="../assets/css/index.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
</head>

<body>
  <div id="root">
    <link rel="stylesheet" href="../assets/css/shared-layout.css" />
    <section>
      <main class="dashboard">
        <aside id="big-sidebar">
          <%- include('../partials/small-sidebar.ejs') %>
        </aside>
        <aside id="small-sidebar">
          <%- include('../partials/big-sidebar.ejs') %>
        </aside>
        <div>
          <%- include('../partials/navbar.ejs') %>
          <div class="dashboard-page">
            <% if(child) { %>
            <%- include(child) %>
            <% } %>
          </div>
        </div>
      </main>
    </section>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        function updateSidebar() {
          const smallSidebar = document.getElementById('small-sidebar');
          const bigSidebar = document.getElementById('big-sidebar');

          if (window.innerWidth <= 992) {
            if (!document.getElementById('small-sidebar-css')) {
              const link = document.createElement('link');
              link.rel = 'stylesheet';
              link.href = '../assets/css/small-sidebar.css';
              link.id = 'small-sidebar-css';
              document.head.appendChild(link);
            }
            const bigSidebarCss = document.getElementById('big-sidebar-css');
            if (bigSidebarCss) {
              document.head.removeChild(bigSidebarCss);
            }
            smallSidebar.style.display = 'block';
            bigSidebar.style.display = 'none';
          } else {
            if (!document.getElementById('big-sidebar-css')) {
              const link = document.createElement('link');
              link.rel = 'stylesheet';
              link.href = '../assets/css/big-sidebar.css';
              link.id = 'big-sidebar-css';
              document.head.appendChild(link);
            }
            const smallSidebarCss = document.getElementById('small-sidebar-css');
            if (smallSidebarCss) {
              document.head.removeChild(smallSidebarCss);
            }
            smallSidebar.style.display = 'none';
            bigSidebar.style.display = 'block';
          }
        }
        updateSidebar();
        window.addEventListener('resize', updateSidebar);
      });
    </script>
    <% 
      const _toast = typeof toast !== 'undefined' ? toast : undefined
    %>
    <% if(_toast) { %>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        toastr.options = {
          "newestOnTop": true,
          "progressBar": true,
          "positionClass": "toast-top-right",
          "preventDuplicates": true,
          "showDuration": "100",
          "hideDuration": "1000",
          "timeOut": "3000",
          "extendedTimeOut": "000",
          "showEasing": "swing",
          "hideEasing": "linear",
          "showMethod": "fadeIn",
          "hideMethod": "fadeOut"
        }
        <% _toast.messages.forEach(function(message, index) { %>
        setTimeout(function() {
          toastr['<%- _toast.type %>']('<%- message %>');
        }, <%= index * 100 %>);
        <% }); %>
      });
    </script>
    <% } %>
</body>

</html>